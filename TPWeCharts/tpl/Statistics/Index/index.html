<extend name="Public:base"/>
<block name="title">数据统计</block>
<block name="content">
    <!-- tab选项卡 start -->
    <div class="weui-tab">
        <div class="weui-navbar" >
            <a class="weui-navbar__item weui-bar__item--on" href="#tab1">
                图表分析
            </a>
            <a class="weui-navbar__item" href="#tab2">
                文字分析
            </a>
        </div>
        <div class="weui-tab__bd" >
            <!-- weui-tab__bd-item start -->
            <div id="tab1" class="weui-tab__bd-item weui-tab__bd-item--active">

                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>关区客运站窗口售票金额</h3></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart1" width="400px" height="300px;"></canvas>
                    </div>
                </div>

                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>县分公司客运站窗口售票金额</h3></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart2" width="400px" height="300px;"></canvas>
                    </div>
                </div>

                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>电子客票销售张数统计</h3></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart3" width="400px" height="300px;"></canvas>
                    </div>
                </div>

                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>电子客票销售金额统计</h3></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart4" width="400px" height="300px;"></canvas>
                    </div>
                </div>

            </div>
            <!-- weui-tab__bd-item end -->
            <!-- weui-tab__bd-item start -->
            <div id="tab2" class="weui-tab__bd-item ">
                <!-- page__bd start -->
                <div class="page__bd">
                    <h3>统计概况</h3>
                    <p class="Ctext">窗口售票金额共计：共计销售车票1763张，销售金额：79.13万元</p>
                    <p class="Ctext">电子客票：共计销售车票1763张，销售金额：94,354元。</p>
                    <p class="Ctext">客票保险：保险票255张，销售金额：8,354元。</p>
                </div>
                <!-- page__bd end -->
                <!-- page__bd start -->
                <div class="page__bd">
                    <div class="weui-cells__title">所属客运站窗口售票金额</div>
                    <div class="weui-cells">
                        <div class="weui-cell">
                            <div class="weui-cell__bd">
                                <p>2017年10月21日</p>
                            </div>
                            <div class="weui-cell__ft">共计：79.13万元</div>
                        </div>
                        <div class="weui-cell weui-cell_swiped">
                            <div class="page__bd">
                                <p class="Ctext">东部客运站：10.58万元</p>
                                <p class="Ctext">快速客运站：11.23万元</p>
                                <p class="Ctext">兴盛客运站：11.96万元</p>
                                <p class="Ctext">客运北站：10.36万元</p>
                                <p class="Ctext">祥云客运站：9.15万元</p>
                                <p class="Ctext">宾川客运站：5.19万元</p>
                                <p class="Ctext">弥渡客运站：2.78万元</p>
                                <p class="Ctext">南涧客运站：3.40万元</p>
                                <p class="Ctext">巍山客运站：2.15万元</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- page__bd end -->
                <!-- page__bd start -->
                <div class="page__bd">
                    <div class="weui-cells__title">电子客票销售情况</div>
                    <div class="weui-cells">
                        <div class="weui-cell">
                            <div class="weui-cell__bd">
                                <p>2017年10月21日</p>
                            </div>
                            <div class="weui-cell__ft">共计：94,354元</div>
                        </div>
                        <div class="weui-cell weui-cell_swiped">
                            <div class="page__bd">
                                <p class="Ctext" >东部客运站：微信销售：47张，共计：4,662元；自助设备销售：352张，共计：9,076元；其它网销渠道销售: 67张，共计：8,082元。</p>
                                <p class="Ctext" >快速客运站：微信销售: 89张,共计：5,241元；自助设备销售：162张，共计：8,671元；其它网销渠道销售：72张，共计：7,029元。</p>
                                <p class="Ctext" >兴盛客运站：微信销售:41张，共计:3,813元；自助设备销售: 628张,共计: 19,771元；其它网销渠道销售：80张，共计：9,460元。</p>
                                <p class="Ctext" >客运北站：微信销售：28张，共计：1,831元；自助设备销售：1张, 共计：56元；其它网销渠道销售：79张，共计：5,164元。</p>
                                <p class="Ctext" >县分公司：微信销售：57张，共计：4,951元；自助设备销售：13张,共计：1,289元；其它网销渠道销售：47张，共计：5,258元。</p>
								<p class="Ctext" >总计：车票1763张 保险255张 金额：94,354元</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- page__bd end -->
            </div>
            <!-- weui-tab__bd-item end -->

        </div>
    </div>
    <!-- tab选项卡 end -->
</block>
<block name="js">
<script type="text/javascript">
    $(function(){
		//
		var surl = "{:U('Search')}";
		var iurl ="{:U('Index')}";
		var curl ="{:U('Contrast')}";
		$("#_data").click(function(){
			//搜索事件
			window.location.href = iurl;	
		});
		$("#_search").click(function(){
			//搜索事件
			window.location.href = surl;	
		});
        $('.weui-tabbar__item').on('click', function () {
            $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass('weui-bar__item_on');
        });
        //weui-navbar
        fun0();
        $('#goToTop').click(function(){
            $('html , body').animate({scrollTop: 0},'slow');
        });
    });
    //
    function fun0(){
        //
        var worldMapContainer = document.getElementById('myChart1');

        //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
        var resizeWorldMapContainer = function () {
            worldMapContainer.style.width = window.innerWidth+'px';
            worldMapContainer.style.height = window.innerHeight+'px';
        };
        //设置容器高宽
        resizeWorldMapContainer();
        var myChart_ = echarts.init(worldMapContainer);
        // 指定图表的配置项和数据
        var option = {
            title: {
                text: '窗口售票金额'
            },
            tooltip: {},
            color: ['rgb(25, 183, 207)'],
            legend: {
                data:['单位：万元']
            },
            itemStyle:{
                normal:{
                    //每个柱子的颜色即为colorList数组里的每一项，如果柱子数目多于colorList的长度，则柱子颜色循环使用该数组
                    color: function (params){
                        var colorList = ['rgb(164,205,238)','rgb(42,170,227)','rgb(25,46,94)','rgb(195,229,235)'];
                        return colorList[params.dataIndex];
                    }
                },

            },
            xAxis: {
                data: ["东客站","快速站","兴盛站","北站"]
            },
            yAxis: {},
            series: [{
                name: '单位：万元',
                type: 'bar',
                label: {
                    normal: {
                        show: true,
                        position: 'top'
                    }
                },
                data: [5, 1.5, 7.8, 10.5]
            }]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart_.setOption(option);
        //用于使chart自适应高度和宽度
        //
        var worldMapContainer2 = document.getElementById('myChart2');

        //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
        var resizeWorldMapContainer2 = function () {
            worldMapContainer2.style.width = window.innerWidth+'px';
            worldMapContainer2.style.height = window.innerHeight+'px';
        };
        //设置容器高宽
        resizeWorldMapContainer2();
        var myChart_2 = echarts.init(worldMapContainer2);
        // 指定图表的配置项和数据
        var option2 = {
            title: {
                text: '窗口售票金额'
            },
            tooltip: {},
            legend: {
                data:['单位：万元']
            },
            color: ['rgb(25, 183, 207)'],
            xAxis: {
				data: ["祥云","宾川","弥渡","南涧","巍山","永平"]
            },
            yAxis: {
                
            },
            series: [{
                name: '单位：万元',
                type: 'bar',
                label: {
                    normal: {
                        show: true,
                        position: 'top'
                    }
                },
                data: [5, 1.5, 7.8, 10.5,5.5,7.9]
            }]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart_2.setOption(option2);
        //
        var worldMapContainer3 = document.getElementById('myChart3');

        //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
        var resizeWorldMapContainer3 = function () {
            worldMapContainer3.style.width = window.innerWidth+'px';
            worldMapContainer3.style.height = window.innerHeight+'px';
        };
        //设置容器高宽
        resizeWorldMapContainer3();
        //
        var myChart_3 = echarts.init(worldMapContainer3);
        // 指定图表的配置项和数据
        var option3 = {
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                data:['微信售票张数','自助机售票张数','其他网销渠道售票张数']
            },
            xAxis : [
                {
                    type : 'category',
                    data : ['东科站','快速站','兴盛站','北站','县分公司']
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'微信售票张数',
                    type:'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data:[320, 332, 301, 334, 390]
                },
                {
                    name:'自助机售票张数',
                    type:'bar',
                    stack: '自助机售票张数',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data:[120, 132, 101, 134, 90]
                },
                {
                    name:'其他网销渠道售票张数',
                    type:'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    stack: '其他网销渠道售票张数',
                    data:[220, 182, 191, 234, 290]
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart_3.setOption(option3);
        //
        var worldMapContainer4 = document.getElementById('myChart4');

        //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
        var resizeWorldMapContainer4 = function () {
            worldMapContainer4.style.width = window.innerWidth+'px';
            worldMapContainer4.style.height = window.innerHeight+'px';
        };
        //设置容器高宽
        resizeWorldMapContainer4();
        var myChart_4 = echarts.init(worldMapContainer4);
        // 指定图表的配置项和数据
        var option4 = {
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                data:['微信售票金额','自助机售票金额','其他网销渠道售票金额']
            },
            xAxis : [
                {
                    type : 'category',
                    data : ['东科站','快速站','兴盛站','北站','县分公司']
                }
            ],
            yAxis : [
                {
                    type : 'value'
                }
            ],
            series : [
                {
                    name:'微信售票金额',
                    type:'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data:[320, 332, 301, 334, 390]
                },
                {
                    name:'自助机售票金额',
                    type:'bar',
                    stack: '自助机售票金额',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data:[120, 132, 101, 134, 90]
                },
                {
                    name:'其他网销渠道售票金额',
                    type:'bar',
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    stack: '其他网销渠道售票金额',
                    data:[220, 182, 191, 234, 290]
                }
            ]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart_4.setOption(option4);
        //
        window.onresize = function () {
            //重置容器高宽

            resizeWorldMapContainer();
            myChart_.resize();
            resizeWorldMapContainer2();
            myChart_2.resize();
            resizeWorldMapContainer3();
            myChart_3.resize();
            resizeWorldMapContainer4();
            myChart_4.resize();
        };
    }
</script>
</block>