<extend name="Public:base"/>
<block name="title">同比数据统计</block>
<block name="content">
    <!-- tab选项卡 start -->
    <div class="weui-tab">
        <div class="weui-navbar" >
            <a id="charts_select" class="weui-navbar__item weui-bar__item--on" href="#tab1">
                图表分析
            </a>
            <a id="words_select" class="weui-navbar__item " href="#tab2">
                文字分析
            </a>

        </div>
        <div class="weui-tab__bd" >
            <!-- weui-tab__bd-item start -->
            <div id="tab1" class="weui-tab__bd-item weui-tab__bd-item--active">
				<input type="hidden" id="tab_type" value="tab1">
                <div id="firstAnchor" class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>关区客运站窗口售票金额同比</h3><label name="lbdate_"></label><br/><label name="lbdate"></label></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart1" width="400px" height="300px;"></canvas>
                    </div>
                </div>


                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>县分公司客运站窗口售票金额同比</h3><label name="lbdate_"></label><br/><label name="lbdate"></label></label></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart3" width="400px" height="300px;"></canvas>
                    </div>
                </div>

				 <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>电子客票销售张数同比</h3><label name="lbdate_"></label><br/><label name="lbdate"></label></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart2" width="400px" height="300px;"></canvas>
                    </div>
                </div>

                <div class="weui-panel weui-panel_access">
                    <div class="weui-panel__hd"><h3>电子客票销售金额同比</h3><label name="lbdate_"></label><br/><label name="lbdate"></label></div>
                    <div class="weui-panel__bd">
                        <canvas id="myChart4"  width="400px" height="300px;" ></canvas>
                    </div>
                </div>

            </div>
            <!-- weui-tab__bd-item end -->
            <!-- weui-tab__bd-item start -->
            <div id="tab2" class="weui-tab__bd-item">
                <!-- page__bd start -->
                <div id="div_wtotal" class="page__bd">
                    <h3>统计概况</h3>
                    <p class="Ctext">售票金额：687,553元(比上周减少：869,290元，减幅：55.84%)。</p>
                    <p class="Ctext">电子客票： 12280张(比上周减少6096张，减幅：33.17%)。</p>
                    <p class="Ctext">客票保险： 1575张(比上周减少587张，减幅: 27.15%)。</p>
                </div>
                <!-- page__bd end -->
                <!-- page__bd start -->
                <div class="page__bd">
                    <div class="weui-cells__title"><label name="lbdate_"></label><br/><label name="lbdate"></label></div>
                    <div class="weui-cells">
                        <div class="weui-cell">
                            <div class="weui-cell__bd">
                                <p>所属客运站窗口售票金额（同比表格）</p>
                            </div>
                            <div class="weui-cell__ft">单位：万元</div>
                        </div>
                    </div>
                </div>
                <div id="div_tb" class="weui-grids">
                    <a href="#" class="weui-grid js_grid">
                        <div class="weui-grid__icon">
                            <img src="__PUBLIC_IMAGES__P/icon8.png" alt="">
                        </div>
                        <p class="weui-grid__label">
                            站名
                        </p>
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        <div class="weui-grid__icon">
                            <img src="__PUBLIC_IMAGES__P/icon9.png" alt="">
                        </div>
                        <p class="weui-grid__label">
                            本时段
                        </p>
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        <div class="weui-grid__icon">
                            <img src="__PUBLIC_IMAGES__P/icon10.png" alt="">
                        </div>
                        <p class="weui-grid__label">
                            同比（增幅）
                        </p>
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        东客站
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        69.23
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        -9.80|-11.90%
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        快速站
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        78.98
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        +9.00|+7.00%
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        兴盛站
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        78.98
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        +9.00|+7.00%
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        北客站
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        78.98
                    </a>
                    <a href="#" class="weui-grid js_grid">
                        +9.00|+7.00%
                    </a>
                </div>
                <!-- page__bd end -->
                <!-- page__bd start -->
                <div class="page__bd">
                    <div class="weui-cells__title"><label name="lbdate_"></label><br/><label name="lbdate"></label></div>
                    <div class="weui-cells">
                        <div class="weui-cell">
                            <div class="weui-cell__bd">
                                <p>电子客票销售情况</p>
                            </div>
                            <div id="div_ettotal" class="weui-cell__ft">共计：94,354元</div>
                        </div>
                        <div class="weui-cell weui-cell_swiped">
                            <div id="words_et" class="page__bd">
                                <p class="Ctext" >东部客运站：微信销售：47张，共计：4,662元；自助设备销售：352张，共计：9,076元；其它网销渠道销售: 67张，共计：8,082元。</p>
                                <p class="Ctext" >快速客运站：微信销售: 89张,共计：5,241元；自助设备销售：162张，共计：8,671元；其它网销渠道销售：72张，共计：7,029元。</p>
                                <p class="Ctext" >兴盛客运站：微信销售:41张，共计:3,813元；自助设备销售: 628张,共计: 19,771元；其它网销渠道销售：80张，共计：9,460元。</p>
                                <p class="Ctext" >客运北站：微信销售：28张，共计：1,831元；自助设备销售：1张, 共计：56元；其它网销渠道销售：79张，共计：5,164元。</p>
                                <p class="Ctext" >县分公司：微信销售：57张，共计：4,951元；自助设备销售：13张,共计：1,289元；其它网销渠道销售：47张，共计：5,258元。</p>
                                <p class="Ctext" >总计：车票1763张 保险255张 金额：94,354元</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- page__bd end -->
            </div>
            <!-- weui-tab__bd-item end -->

        </div>
    </div>
    <!-- tab选项卡 end -->
</block>
<block name="js">
    <script type="text/javascript">
		var gqckstation =[];
		var gq_now_ck = [];
		var gq_next_ck = [];
		//县分公司数据变量
		var xfckstation =[];
		var xf_now_ck = [];
		var xf_next_ck = [];
		//
		var ettbstation =[];
		var ettb_now_m = [];
		var ettb_next_m = [];
		var ettb_now_t = [];
		var ettb_next_t = [];
		//查询参数获得
		var _Search_start = $.cookie('_Search_start');
		var _Search_end = $.cookie('_Search_end');
		var _Search_start_next = $.cookie('_Search_start_next');
		var _Search_end_next = $.cookie('_Search_end_next');
		var _Search_flag = $.cookie('_Search_flag');
		//查询参数初始化
		if(!_Search_flag)
		   {
				_Search_flag=1;//相邻时段对比
		   }
		if(!_Search_start || !_Search_end)
		   {
				var myDate = new Date();
				myDate.setTime(myDate.getTime()-30*24*60*60*1000);
				
				//
				var myDate1 = new Date();
				var myDate2 = new Date();
				myDate2.setTime(myDate-1*24*60*60*1000);
				myDate = Date_Format(myDate,"yyyy-MM-dd");
				_Search_start = myDate;
				var myDate3 = new Date();
				myDate1 = Date_Format(myDate1,"yyyy-MM-dd");
				_Search_end = myDate1;
				var n = DateDiff(_Search_start,_Search_end);
				myDate3.setTime(myDate2-n*24*60*60*1000);
				
				//相邻时间计算
				myDate2 = Date_Format(myDate2,"yyyy-MM-dd");
				myDate3 = Date_Format(myDate3,"yyyy-MM-dd");
				_Search_start_next = myDate3;
				_Search_end_next = myDate2;
				//alert(_Search_start_next);
		  }
		  //
        $(function(){
			var surl = "{:U('Search')}";
			var iurl ="{:U('Index')}";
			var curl ="{:U('Contrast')}";
			Charts_data_deal();
			$("#_search").click(function(){
				//搜索事件
				window.location.href = surl;	
			});
			$("#_data").click(function(){
				//搜索事件
				window.location.href = curl;	
			});
            $('.weui-tabbar__item').on('click', function () {
                $(this).addClass('weui-bar__item_on').siblings('.weui-bar__item_on').removeClass('weui-bar__item_on');
            });
            Words_data_deal();
        });
		//图表部分数据处理Ajax
		function Charts_data_deal(){
			var lbtxt = ' (本时段)'+_Search_start+"/"+_Search_end;
			var lbtxt_  = '(上时段)'+_Search_start_next+"/"+_Search_end_next;
			$("#charts_select").click(function() {
				$("#tab_type").val("tab1");
			});
			
			$("label[name='lbdate']").each(function(){
				$(this).html(lbtxt);
			});
            $("label[name='lbdate_']").each(function(){
                $(this).html(lbtxt_);
            });
			var action_ = "{:U('GetResult')}";
			//请求统计数据
			$.ajax({
				url:action_,
				type:"POST",
				data:{_Search_start:_Search_start,_Search_end:_Search_end
				,_Search_start_next:_Search_start_next,_Search_end_next:_Search_end_next
				,_Search_flag:_Search_flag},
				dataType:"json",
				error:function(data){
				},
				success:function(data){
					if(data)
					{
						if(data.state ==0)
						{
							var gq_data = data.gq_data[0];
							var xf_data = data.xf_data[0];
							var et_data = data.et_data[0];
							if(gq_data)
							{
								//关区窗口数据
								gqckstation = gq_data.station;
								gq_now_ck = gq_data.now;
								gq_next_ck = gq_data.next;
							}
							//
							if(xf_data)
							{
								//县份窗口数据
								xfckstation = xf_data.station;
								xf_now_ck = xf_data.now;
								xf_next_ck = xf_data.next;
							}
							//
							if(et_data)
							{
								ettbstation = et_data.station;
								ettb_now_m = et_data.now_m;
								ettb_next_m = et_data.next_m;
								ettb_now_t = et_data.now_t;
								ettb_next_t = et_data.next_t;
							}
							//渲染
							fun_charts();
						}
					}
				}
			});
		}
		//文字部分数据处理方法Ajax
		function Words_data_deal(){
			//文字信息统计处理
		var action_ = "{:U('GetResultWords')}";
		$("#words_select").click(function(){
			$("#tab_type").val("tab2");
			var c = 0,c1 = 0,c2 = 0,f= 0,f1= 0,f2= 0,c3= 0,f3=0;
			var fix_ = "增加  ",fix_1 = "增加  ",fix_2 = "增加  ",fix_3 = "增加  ",fix_fd = "增幅  ",fix_fd1 = "增幅  ",fix_fd2 = "增幅  ",fix_fd3 = "增幅  ";
			$.ajax({
				url:action_,
				type:"POST",
				data:{_Search_start:_Search_start,_Search_end:_Search_end
				,_Search_start_next:_Search_start_next,_Search_end_next:_Search_end_next
				,_Search_flag:_Search_flag},
				dataType:"json",
				error:function(data){
				},
				success:function(data){
					if(data)
					{
						if(data.state == 0)
						{
							var tb_data_ck = data.TB_Data;
							var et_data_w = data.words_data;
							var et_data_w_ = data.words_data_;
							var total_ = data.total_data[0];
							var total_1 = data.total_data_[0];
							if(total_){
									if(parseInt(total_1.etotal_t) >= parseInt(total_.etotal_t))
									{
										c = parseInt(total_1.etotal_t) - parseInt(total_.etotal_t);
										fix_ ="减少  ";
										fix_fd = "减幅  "
									}else
									{
										c = parseInt(total_.etotal_t) - parseInt(total_1.etotal_t);
									}
									//
									if(parseInt(total_1.total_i) >= parseInt(total_.total_i))
									{
										c1 = parseInt(total_1.total_i) - parseInt(total_.total_i);
										fix_1 ="减少  ";
										fix_fd1 = "减幅  "
									}else
									{
										c1 = parseInt(total_.total_i) - parseInt(total_1.total_i);
									}
									//
									if(parseFloat(total_1.etotal_m) >= parseFloat(total_.etotal_m))
									{
										c2 = parseFloat(total_1.etotal_m) - parseFloat(total_.etotal_m);
										fix_2 ="减少  ";
										fix_fd2 = "减幅  "
									}else
									{
										c2 = parseFloat(total_.etotal_m) - parseFloat(total_1.etotal_m);
									}
                                    //窗口售票统计处理
                                    if(parseInt(total_1.total_ck_m) >= parseInt(total_.total_ck_m))
                                    {
                                        c3 = parseFloat(total_1.total_ck_m) - parseFloat(total_.total_ck_m);
                                        fix_3 ="减少  ";
                                        fix_fd3 = "减幅  "
                                    }else {
                                        c3 = parseFloat(total_.total_ck_m) - parseFloat(total_1.total_ck_m);
                                    }
									var v = parseFloat(c); 
									var a = parseFloat(total_.etotal_t); 
									f = Math.round((v/a)*100);
                                    c = c.toFixed(2);
									//
									var v1 = parseFloat(c1); 
									var a1 = parseFloat(total_.total_i); 
									f1 = Math.round((v1/a1)*100);
                                    c1 = c1.toFixed(2);
									//
									var v2 = parseFloat(c2); 
									var a2 = parseFloat(total_.etotal_m); 
									f2 = Math.round((v2/a2)*100);
                                    c2 = c2.toFixed(2);
                                    //
                                    var v3 = parseFloat(c3);
                                    var a3 = parseFloat(total_.total_ck_m);
                                    f3 = Math.round((v3/a3)*100);
                                    c3 = c3.toFixed(2);
									//综合统计
									var _html ='<p>&nbsp;</p>';
									_html += '<h3>综合预览</h3>';
									_html += '<p class="Ctext">窗口票销售情况：'+parseFloat(total_.total_ck_m)+'  万元(比上时段'+fix_3+c3+' 万元 '+fix_fd3+f3+'%);</p>';
									_html += '<p class="Ctext">电子票销售情况：'+total_.etotal_t
									+' 张(比上时段'+fix_+c+'张 '+fix_fd+f+'%)，共计：'+parseFloat(total_.etotal_m)
									+'  元(比上时段'+fix_2+c2+' 元 '+fix_fd2+f2+'%);</p>';
									_html += '<p class="Ctext">保险票销售情况：：'+total_.total_i
									+' 张(比上时段'+fix_1+c1+'张 '+fix_fd1+f1+'%) ;</p>';
									$("#div_wtotal").html(_html);
									//									
									$("#div_ettotal").html("总计："+total_.etotal_m+" 元");
								}
							if(tb_data_ck)
							{
								var _html ='';
								_html +='\
										<a href="#" class="weui-grid js_grid">\
																<div class="weui-grid__icon">\
																	<img src="__PUBLIC_IMAGES__P/icon8.png" alt="">\
																</div>\
																<p class="weui-grid__label">\
																	站名\
																</p>\
															</a>\
															<a href="#" class="weui-grid js_grid">\
																<div class="weui-grid__icon">\
																	<img src="__PUBLIC_IMAGES__P/icon9.png" alt="">\
																</div>\
																<p class="weui-grid__label">\
																	本时段\
																</p>\
															</a>\
															<a href="#" class="weui-grid js_grid">\
																<div class="weui-grid__icon">\
																	<img src="__PUBLIC_IMAGES__P/icon10.png" alt="">\
																</div>\
																<p class="weui-grid__label">\
																	同比（增幅）\
																</p>\
															</a>\
										';
								for(var o in tb_data_ck){ 
									//alert(tb_data_ck[o].stationname); 
									_html += '<a href="#" class="weui-grid js_grid">'+tb_data_ck[o].stationname+'</a>';
									_html += '<a href="#" class="weui-grid js_grid">'+tb_data_ck[o].m_num+'</a>';
									_html += '<a href="#" class="weui-grid js_grid">'+tb_data_ck[o].tb_text+'</a>';
								}
								$("#div_tb").html(_html);
							}
							//
							var _html ='';
							if(et_data_w)
							{
								_html +='<p >日期：'+_Search_start+'至'+_Search_end;
								for(var i=0;i < et_data_w.length ;i++)
								{
									_html += '<p class="Ctext">'+et_data_w[i][1]+'：'
									+et_data_w[i][2]+et_data_w[i][3]
									+et_data_w[i][4]+et_data_w[i][5]+' 元'
									+'；'+et_data_w[i][6]+et_data_w[i][7]
									+et_data_w[i][8]+et_data_w[i][9]+' 元'
									+'；'+et_data_w[i][10]+et_data_w[i][11]
									+et_data_w[i][12]+et_data_w[i][13]+' 元'
									+'</p>';
								}
							}
							_html +="<br/>";
							if(et_data_w_)
							{
								_html +='<p >日期：'+_Search_start_next+'至'+_Search_end_next;
								for(var i=0;i < et_data_w_.length ;i++)
								{
									_html += '<p class="Ctext">'+et_data_w_[i][1]+'：'
									+et_data_w_[i][2]+et_data_w_[i][3]
									+et_data_w_[i][4]+et_data_w_[i][5]+' 元'
									+'；'+et_data_w_[i][6]+et_data_w_[i][7]
									+et_data_w_[i][8]+et_data_w_[i][9]+' 元'
									+'；'+et_data_w_[i][10]+et_data_w_[i][11]
									+et_data_w_[i][12]+et_data_w_[i][13]+' 元'
									+'</p>';
								}
								
							}
							if(total_){

									_html +="<br/>";
									_html += '<p >总计：车票 '+total_.etotal_t+' 张(比上时段'+fix_+c+'张 '+fix_fd+f+'%)，保险'
									+total_.total_i+' 张(比上时段'+fix_1+c1+'张 '+fix_fd1+f1+'%)，共计：'
									+total_.etotal_m+'  元(比上时段'+fix_2+c2+' 元 '+fix_fd2+f2+'%);</p>';
								}
							$("#words_et").html(_html);
							//
							
						}else {
							$.alert("请您输入合适的查询条件进行检索！", "警告");
						}
					}
				}
			});
		});
		}
        //图表渲染逻辑
        function fun_charts(){
            //
            var worldMapContainer = document.getElementById('myChart1');

            //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
            var resizeWorldMapContainer = function () {
                worldMapContainer.style.width = window.innerWidth+'px';
                worldMapContainer.style.height = parseInt(window.innerHeight)*0.6+'px';
            };
            //设置容器高宽
            resizeWorldMapContainer();
            var myChart_ = echarts.init(worldMapContainer);
            // 指定图表的配置项和数据
            var option = {
                title:{
                    text:'单位：万元',
                    x:'right',
                    y:'top',
                    textStyle:{
                        //文字颜色
                        color:'#5B5B5B',
                        //字体风格,'normal','italic','oblique'
                        fontStyle:'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight:'bold',
                        //字体系列
                        fontFamily:'sans-serif',
                        //字体大小
                        fontSize:12
                    }
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                legend: {
					x:'left',
					y:'top',
                    data:['本时段','上时段']
                },
                xAxis : [
                    {
                        type : 'category',
                        data : gqckstation,
						axisLabel:{
							interval:0,//横轴信息全部显示
							rotate:30,//-30度角倾斜显示
						}
                    }
                ],
                yAxis : [
                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'本时段',
                        type:'bar',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:gq_now_ck
                    },
                    {
                        name:'上时段',
                        type:'bar',
                        stack: '上时段',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:gq_next_ck
                    }
                ]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart_.setOption(option);
            //
            var worldMapContainer2 = document.getElementById('myChart2');

            //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
            var resizeWorldMapContainer2 = function () {
                worldMapContainer2.style.width = window.innerWidth+'px';
                worldMapContainer2.style.height = parseInt(window.innerHeight)*0.6+'px';
            };
            //设置容器高宽
            resizeWorldMapContainer2();
            var myChart_2 = echarts.init(worldMapContainer2);
            // 指定图表的配置项和数据
            var option2 = {
                title:{
                    text:'单位：张',
                    x:'right',
                    y:'top',
                    textStyle:{
                        //文字颜色
                        color:'#5B5B5B',
                        //字体风格,'normal','italic','oblique'
                        fontStyle:'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight:'bold',
                        //字体系列
                        fontFamily:'sans-serif',
                        //字体大小
                        fontSize:12
                    }
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                legend: {
					x:'left',
					y:'top',
                    data:['本时段','上时段']
                },
                xAxis : [

                    {
                        type : 'category',
                        data : ettbstation,
						axisLabel:{
							interval:0,//横轴信息全部显示
							rotate:30,//-30度角倾斜显示
						}
                    }
                ],
                yAxis : [

                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'本时段',
                        type:'bar',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:ettb_now_t
                    },
                    {
                        name:'上时段',
                        type:'bar',
                        stack: '上时段',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:ettb_next_t
                    }
                ]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart_2.setOption(option2);
            //
            var worldMapContainer3 = document.getElementById('myChart3');

            //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
            var resizeWorldMapContainer3 = function () {
                worldMapContainer3.style.width = window.innerWidth+'px';
                worldMapContainer3.style.height = parseInt(window.innerHeight)*0.6+'px';
            };
            //设置容器高宽
            resizeWorldMapContainer3();
            //
            var myChart_3 = echarts.init(worldMapContainer3);
            // 指定图表的配置项和数据
            var option3 = {
                title:{
                    text:'单位：万元',
                    x:'right',
                    y:'top',
                    textStyle:{
                        //文字颜色
                        color:'#5B5B5B',
                        //字体风格,'normal','italic','oblique'
                        fontStyle:'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight:'bold',
                        //字体系列
                        fontFamily:'sans-serif',
                        //字体大小
                        fontSize:12
                    }
                },
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
					x:'left',
					y:'top',
                    data:['本时段','上时段']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '15%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: xfckstation,
					axisLabel:{
							interval:0,//横轴信息全部显示
							rotate:60,//-30度角倾斜显示
						}
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name:'本时段',
                        type:'line',
                        stack: '总量',
                        data:xf_now_ck
                    },
                    {
                        name:'上时段',
                        type:'line',
                        stack: '总量',
                        data:xf_next_ck
                    }
                ]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart_3.setOption(option3);
            //
            var worldMapContainer4 = document.getElementById('myChart4');

            //用于使chart自适应高度和宽度,通过窗体高宽计算容器高宽
            var resizeWorldMapContainer4 = function () {
                worldMapContainer4.style.width = window.innerWidth+'px';
                worldMapContainer4.style.height = parseInt(window.innerHeight)*0.6+'px';
            };
            //设置容器高宽
            resizeWorldMapContainer4();
            var myChart_4 = echarts.init(worldMapContainer4);
            // 指定图表的配置项和数据
            var option4 = {
                title:{
                    text:'单位：张',
                    x:'right',
                    y:'top',
                    textStyle:{
                        //文字颜色
                        color:'#5B5B5B',
                        //字体风格,'normal','italic','oblique'
                        fontStyle:'normal',
                        //字体粗细 'normal','bold','bolder','lighter',100 | 200 | 300 | 400...
                        fontWeight:'bold',
                        //字体系列
                        fontFamily:'sans-serif',
                        //字体大小
                        fontSize:12
                    }
                },
                tooltip : {
                    trigger: 'axis',
                    axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                        type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                    }
                },
                legend: {
					x:'left',
					y:'top',
                    data:['本时段','上时段']
                },
                xAxis : [

                    {
                        type : 'category',
                        data : ettbstation,
						axisLabel:{
							interval:0,//横轴信息全部显示
							rotate:30,//-30度角倾斜显示
						}
                    }
                ],
                yAxis : [

                    {
                        type : 'value'
                    }
                ],
                series : [
                    {
                        name:'本时段',
                        type:'bar',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:ettb_now_m
                    },
                    {
                        name:'上时段',
                        type:'bar',
                        stack: '上时段',
                        label: {
                            normal: {
                                show: true,
                                position: 'top'
                            }
                        },
                        data:ettb_next_m
                    }
                ]
            };
            // 使用刚指定的配置项和数据显示图表。
            myChart_4.setOption(option4);
            window.onresize = function () {
                //重置容器高宽
                resizeWorldMapContainer();
                myChart_.resize();
                resizeWorldMapContainer2();
                myChart_2.resize();
                resizeWorldMapContainer3();
                myChart_3.resize();
                resizeWorldMapContainer4();
                myChart_4.resize();
            };
        }
		//
    </script>
</block>